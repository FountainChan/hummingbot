# 策略清单（项目内）

本文档列出仓库中主要的策略实现与示例脚本，包含文件位置、如何运行（概览）与算法/原理要点。

注意：大多数策略通过 Hummingbot CLI 或脚本接口运行。脚本示例可用 `script start <path>` 在客户端中加载；内置策略通常通过客户端的 `start` 命令并加载对应配置文件（见 `conf/`）。

---

## 核心策略（hummingbot/strategy）

- **Pure Market Making（纯做市）**
  - 位置：`hummingbot/strategy/pure_market_making/`
  - 入口：`hummingbot/strategy/pure_market_making/start.py`
  - 运行：在 Hummingbot CLI 中选择或加载 `pure_market_making` 的配置并 `start`；也可用相应 conf 文件启动。
  - 原理：在买卖两侧同时挂单以赚取点差，包含库存（inventory）管理与移动价带（moving price band）以控制中性风险。

- **Avellaneda Market Making（Avellaneda 做市）**
  - 位置：`hummingbot/strategy/avellaneda_market_making/`
  - 入口：`start.py`（同目录）
  - 运行：通过客户端加载 `avellaneda_market_making` 配置并 `start`。
  - 原理：基于 Avellaneda & Stoikov 模型动态计算买卖价差，目标为在给定风险厌恶参数下优化收益-风险权衡。

- **Perpetual Market Making（衍生品做市）**
  - 位置：`hummingbot/strategy/perpetual_market_making/`
  - 入口：`perpetual_market_making.py`, `start.py`
  - 运行：加载 `perpetual_market_making` 配置并 `start`。
  - 原理：针对永续合约市场的做市逻辑，考虑资金费率、仓位限制与保证金规则。

- **AMM Arbitrage（AMM 套利） / amm_arb**
  - 位置：`hummingbot/strategy/amm_arb/`
  - 入口：`amm_arb.py`, `start.py`
  - 运行：加载 `amm_arb` 配置并 `start`。
  - 原理：在 AMM（如 Uniswap）与中心化/其他流动性源间捕捉价格差并执行套利交易。

- **Cross-Exchange Market Making / Cross-Exchange Mining**
  - 位置：`hummingbot/strategy/cross_exchange_market_making/`，`hummingbot/strategy/cross_exchange_mining/`
  - 入口：各自目录下的 `start.py` 与策略文件
  - 运行：加载对应策略配置并 `start`。
  - 原理：跨交易所分配挂单或挖矿（提供流动性获取激励），通常涉及资金与订单同步逻辑。

- **Liquidity Mining**
  - 位置：`hummingbot/strategy/liquidity_mining/`
  - 入口：`liquidity_mining.py`, `start.py`
  - 运行：加载 `liquidity_mining` 配置并 `start`。
  - 原理：为特定市场提供流动性并追踪激励（例如返佣/补贴），包含收益统计与风险控制。

- **Hedge（对冲）**
  - 位置：`hummingbot/strategy/hedge/`
  - 入口：`hedge.py`, `start.py`
  - 运行：加载 `hedge` 配置并 `start`。
  - 原理：实现不同市场或资产间头寸对冲，减少敞口与市场风险。

---

## Strategy V2（模块化控制器/执行器架构）

项目包含 `strategy_v2` 框架，分层为 Controllers（信号生成）与 Executors（下单执行）。常见实现位于：

- 位置：`hummingbot/strategy_v2/controllers/`、`hummingbot/strategy_v2/executors/`
- 运行：通过在脚本或 StrategyV2 主体中实例化 Controllers 与 Executors（示例脚本：`scripts/v2_with_controllers.py`、`scripts/v2_twap_multiple_pairs.py` 等）。
- 原理：把策略拆分为生成信号（Controller）和执行下单（Executor），便于组合与测试。

示例组件：
- `twap_executor`（定时拆单执行）: `hummingbot/strategy_v2/executors/twap_executor/`
- `grid_executor`：网格执行器：`hummingbot/strategy_v2/executors/grid_executor/`
- `dca_executor`：均摊买入执行器：`hummingbot/strategy_v2/executors/dca_executor/`

示例脚本（V2）：
- `scripts/v2_with_controllers.py` — 演示如何在 StrategyV2 架构下组合控制器与执行器。
- `scripts/v2_directional_rsi.py`、`scripts/v2_funding_rate_arb.py`、`scripts/v2_twap_multiple_pairs.py` — V2 风格策略示例。

---

## CLI-脚本示例（`scripts/`）

仓库包含大量脚本示例，方便快速测试或作为策略模板。

- `scripts/simple_pmm.py` / `scripts/basic/simple_order_example.py` / `scripts/simple_vwap.py`
  - 位置：`scripts/` 与 `scripts/basic/`
  - 运行：在 Hummingbot CLI 中运行 `script start scripts/simple_pmm.py` 或通过 `tools/run_synthetic_backtest.py` 生成示例数据。
  - 原理：简化版的做市 / VWAP 下单示例，适合演示客户端脚本接口。

- `scripts/utility/backtest_mm_example.py`
  - 位置：`scripts/utility/backtest_mm_example.py`
  - 运行：作为脚本运行（`script start scripts/utility/backtest_mm_example.py`）或直接在 Python 环境中以 `PYTHONPATH` 调用脚本（需安装包依赖）；脚本会把回测结果导出为 CSV。
  - 原理：基于历史 OHLCV 蜡烛模拟简化做市成交逻辑并输出统计结果，便于回测快速验证。

- 社区示例（`scripts/community/`）
  - 包含：`directional_strategy_trend_follower.py`, `directional_strategy_macd_bb.py`, `simple_rsi_no_config.py`, `fixed_grid.py`, `triangular_arbitrage.py` 等。
  - 运行：`script start scripts/community/<file>.py`
  - 原理：社区贡献的多种策略模板（趋势跟随、指标组合、网格、三角套利等），适合参考与改造。

---

## 如何运行策略（概览）

1. 启动 Hummingbot 客户端（交互式）：
   ```bash
   # 在开发环境或虚拟环境中
   python -m hummingbot
   # 或使用仓库的 bin 脚本（视环境而定）
   # bin/hummingbot.py
   ```

2. 在客户端中：
   - 运行脚本：`script start <relative-path-to-script>`，例如：
     ```text
     script start scripts/utility/backtest_mm_example.py
     ```
   - 启动内置策略：使用 `start` 命令并加载相应的配置（通常在 `conf/` 下有模板），或在首次运行时按提示创建配置并 `start`。

3. 非交互方式（示例）：
   - 使用我们添加的合成回测工具：
     ```bash
     /workspaces/hummingbot/.venv/bin/python tools/run_synthetic_backtest.py --out data/synth_backtest.csv --plot
     ```

---

## 建议与下一步

- 我可以为每个策略编写更详细的运行示例（示例 conf、必需参数说明、典型风险参数），以及把每个策略的配置模板拷贝到 `docs/策略开发/` 作为子文档。请确认是否需要对某些策略（例如 `avellaneda_market_making`、`pure_market_making`、或 V2 控制器组合）进行深度文档化。

---

文件生成：`docs/策略开发/策略清单.md`。
